<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="">

<title>workshop_1_sums_r_programming</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="WorkShop_1_Sums_R_Programming_files/libs/clipboard/clipboard.min.js"></script>
<script src="WorkShop_1_Sums_R_Programming_files/libs/quarto-html/quarto.js"></script>
<script src="WorkShop_1_Sums_R_Programming_files/libs/quarto-html/popper.min.js"></script>
<script src="WorkShop_1_Sums_R_Programming_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="WorkShop_1_Sums_R_Programming_files/libs/quarto-html/anchor.min.js"></script>
<link href="WorkShop_1_Sums_R_Programming_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="WorkShop_1_Sums_R_Programming_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="WorkShop_1_Sums_R_Programming_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="WorkShop_1_Sums_R_Programming_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="WorkShop_1_Sums_R_Programming_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<p><img src="Logo_Sums_BioStatistics.png" class="img-fluid"></p>
<blockquote class="blockquote">
<h1 id="r-programming-workshop">R Programming Workshop</h1>
<blockquote class="blockquote">
<blockquote class="blockquote">
<h6 id="habib-ezzatabadi" class="anchored"><strong><em>Habib Ezzatabadi</em></strong></h6>
</blockquote>
</blockquote>
</blockquote>
<p><br><br><br><br><br> <br><br><br><br><br> <br><br><br><br><br></p>
<blockquote class="blockquote">
<h4 id="to-understand-computaions-in-r-two-slogans-are-helpful" class="anchored">To Understand Computaions in R, two slogans are helpful:</h4>
<ul>
<li>Everything that exists is an object.</li>
<li>Everything that happens is a function call.</li>
</ul>
<blockquote class="blockquote">
<p><strong><em>John Chambers</em></strong></p>
</blockquote>
</blockquote>
<section id="what-characteristics-should-a-programming-language-have-in-order-to-be-a-programming-language" class="level2">
<h2 class="anchored" data-anchor-id="what-characteristics-should-a-programming-language-have-in-order-to-be-a-programming-language">What characteristics should a programming language have in order to be a programming language?</h2>
<p>a programming language typically includes several key features to be effective and versatile. Here are some of them:</p>
<ol type="1">
<li><p><strong>Variables and Data Types</strong>: Variables are used to store data, and data types define the kind of data that can be stored.</p></li>
<li><p><strong>Control Structures</strong>: These include conditional statements (like <code>if</code>, <code>else</code>) and loops (like <code>for</code>, <code>while</code>) that control the flow of the program.</p></li>
<li><p><strong>Functions or Procedures</strong>: These are reusable blocks of code that perform a specific task. They can take inputs and return outputs.</p></li>
<li><p><strong>Input and Output Operations</strong>: A programming language should be able to interact with the user or system, taking input and providing output.</p></li>
<li><p><strong>Error Handling Mechanisms</strong>: This allows the program to respond to unexpected events or conditions.</p></li>
<li><p><strong>Libraries or Packages</strong>: These are collections of pre-written code that programmers can use to save time and effort.</p></li>
<li><p><strong>Object-Oriented Features</strong>: Many modern languages support object-oriented programming, which includes concepts like classes, objects, inheritance, and polymorphism.</p></li>
<li><p><strong>Concurrency Control</strong>: For applications that require multitasking, languages provide features to manage concurrent execution of tasks.</p></li>
</ol>
<p>Remember, not all programming languages have all these features, and some languages may have additional features not listed here. The choice of language often depends on the specific needs of the project or task at hand.</p>
<hr>
<hr>
</section>
<section id="why-do-we-use-loop-in-programming" class="level2">
<h2 class="anchored" data-anchor-id="why-do-we-use-loop-in-programming">Why do we use loop in programming?</h2>
<p>Loops are fundamental to programming because they allow developers to efficiently repeat tasks. Here are a few reasons why we use loops in programming:</p>
<ol type="1">
<li><p><strong>Code Reusability</strong>: Instead of writing the same code multiple times, a loop can execute a block of code as many times as needed. This makes the code more concise and easier to maintain.</p></li>
<li><p><strong>Efficiency</strong>: Loops can significantly reduce the time and effort required to develop and debug code. They allow programmers to handle large amounts of data effectively.</p></li>
<li><p><strong>Control over Program Flow</strong>: Loops provide control over the flow of the program. They allow the program to move forward only if certain conditions are met, which is crucial in decision-making processes.</p></li>
<li><p><strong>Data Processing</strong>: Loops are especially useful in scenarios where data needs to be processed or manipulated. For example, iterating over arrays or lists, performing operations on each element of a database, etc.</p></li>
</ol>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Before we continue the discussion together, we need to talk about vector programming;</p>
</blockquote>
</blockquote>
</section>
<section id="what-mean-vector-programming" class="level2">
<h2 class="anchored" data-anchor-id="what-mean-vector-programming">what mean Vector programming</h2>
<p>Vector programming, also known as array programming, refers to a style of computer programming where operations are applied to whole arrays instead of individual elements. In this style of programming, a single operation can cause data to be manipulated in a collection of numbers (usually arrays or matrices), which can significantly improve performance for mathematical and scientific computations.</p>
<p>For example, if you have two arrays of numbers and you want to add them together, in a traditional programming language like C or Java, you would typically use a loop to iterate over the arrays and add each pair of numbers one at a time. But in a vector programming language like MATLAB or NumPy in Python, you can add the two arrays directly with a single command, and the programming language takes care of performing the addition for each pair of elements.</p>
<p>This style of programming is particularly useful in fields such as data analysis, physics simulations, and machine learning where operations on large datasets are common.</p>
<p>In order to better understand the different of vector programming and traditional programming, pay attention to the following examples;</p>
</section>
<section id="generate-data-with-n-109" class="level2">
<h2 class="anchored" data-anchor-id="generate-data-with-n-109">Generate data with n = 10<sup>9</sup></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-mwssage="false">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## generate data -----</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">321</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fl">1e+9</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>mymat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(n, <span class="dv">2</span>, <span class="dv">1</span>), <span class="fl">1e+5</span>, <span class="fl">1e+4</span>) </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(mymat, <span class="at">file =</span> <span class="st">"Data_for_test"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="traditional-programming" class="level4">
<h4 class="anchored" data-anchor-id="traditional-programming">Traditional Programming</h4>
<section id="use-nested-loops-while" class="level6">
<h6 class="anchored" data-anchor-id="use-nested-loops-while">Use Nested Loops (while)</h6>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>mem_init <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>mymat <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-nested-loops-while-1" class="level6">
<h6 class="anchored" data-anchor-id="use-nested-loops-while-1">Use Nested Loops (while)</h6>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>mem_init_w <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>mymat <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Use Traditional Programmin ------------------------------</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>mean_temp1_w <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>start_time1_w <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (k <span class="sc">&lt;=</span> <span class="fl">1e+4</span>) {</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> (m <span class="sc">&lt;=</span> <span class="fl">1e+5</span>) {</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        temp <span class="ot">&lt;-</span> temp <span class="sc">+</span> mymat[m, k]</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        m <span class="ot">&lt;-</span> m <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    mean_temp1_w <span class="ot">&lt;-</span> <span class="fu">c</span>(mean_temp1_w, temp <span class="sc">/</span> <span class="fl">1e+5</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    k <span class="ot">&lt;-</span> k <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>end_time1_w <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>Time_Traditional_w <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time1_w, start_time1_w, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>trad_mem_w <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init_w</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp1_w, Time_Traditional_w, trad_mem_w, <span class="at">file =</span> <span class="st">"Traditional_w.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-nested-loops-for" class="level6">
<h6 class="anchored" data-anchor-id="use-nested-loops-for">Use Nested Loops (for)</h6>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>mem_init <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>mymat <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Use Traditional Programmin ------------------------------</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>mean_temp1 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>start_time1 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fl">1e+4</span>) {</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fl">1e+5</span>) {</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        temp <span class="ot">&lt;-</span> temp <span class="sc">+</span> mymat[j, i]</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    mean_temp1 <span class="ot">&lt;-</span> <span class="fu">c</span>(mean_temp1, temp <span class="sc">/</span> <span class="fl">1e+5</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>end_time1 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>Time_Traditional <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time1, start_time1, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>trad_mem <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp1, Time_Traditional, trad_mem, <span class="at">file =</span> <span class="st">"Traditional_f.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-nested-loops-repeat" class="level6">
<h6 class="anchored" data-anchor-id="use-nested-loops-repeat">Use Nested Loops (repeat)</h6>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>mem_init_re <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>mymat <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Use Traditional Programmin ------------------------------</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>mean_temp1_re <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>start_time1_re <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>k <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="cf">repeat</span>{</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    j <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    s <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">repeat</span>{</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        j <span class="ot">&lt;-</span> j <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        temp <span class="ot">=</span> mymat[j, k]</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>        s <span class="ot">&lt;-</span> s <span class="sc">+</span> temp</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (j <span class="sc">==</span> <span class="fl">1e+5</span>) <span class="cf">break</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    mean_temp1_re <span class="ot">&lt;-</span> <span class="fu">c</span>(mean_temp1_re, s <span class="sc">/</span> <span class="fl">1e+5</span>)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (k <span class="sc">==</span> <span class="fl">1e+4</span>) <span class="cf">break</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    k <span class="ot">&lt;-</span> k <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>end_time1_re <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>Time_Traditional_re <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time1_re, start_time1_re, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>trad_mem_re <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init_re</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp1_re, Time_Traditional_re, trad_mem_re, <span class="at">file =</span> <span class="st">"Traditional_re.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="using-include-loop-for" class="level4">
<h4 class="anchored" data-anchor-id="using-include-loop-for">using include Loop (for)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>mem_init <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## use loop --------------------</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>mymat <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>mean_temp2 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>start_time2 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fl">1e+4</span>){</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="fu">mean</span>(mymat[, i])</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    mean_temp2 <span class="ot">&lt;-</span> <span class="fu">c</span>(mean_temp2, temp)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>end_time2 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>time_loop <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time2, start_time2, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>loop_mem <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp2, time_loop, loop_mem, </span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">file =</span> <span class="st">"loop.Rdata"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-apply-function" class="level4">
<h4 class="anchored" data-anchor-id="use-apply-function">use apply function</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>mem_init <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## apply -----------------</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>mymat <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test"</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>mean_temp3 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>start_time3 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>mean_temp3 <span class="ot">&lt;-</span> <span class="fu">apply</span>(mymat, <span class="dv">2</span>, mean)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>end_time3 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>time_apply <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time3, start_time3, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>apply_mem <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp3, time_apply, apply_mem, <span class="at">file =</span> <span class="st">"aPPly.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-vapply-function" class="level4">
<h4 class="anchored" data-anchor-id="use-vapply-function">Use vapply function</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>mem_init <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">## vapply -------------------------</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>mymat <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>mean_temp4 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>start_time4 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>mean_temp4 <span class="ot">&lt;-</span> <span class="fu">vapply</span>(mymat<span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>(), <span class="at">FUN =</span> mean, <span class="at">FUN.VALUE =</span> <span class="fu">numeric</span>(<span class="dv">1</span>))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>end_time4 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>time_vapply <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time4, start_time4, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>vapply_mem <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp4, time_vapply, vapply_mem, <span class="at">file =</span> <span class="st">"Vapply.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="use-lapply-function" class="level2">
<h2 class="anchored" data-anchor-id="use-lapply-function">Use lapply function</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>mem_init <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">## lapply -------------------------</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>mymat <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>mean_temp5 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>start_time5 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>mean_temp5 <span class="ot">&lt;-</span> <span class="fu">lapply</span>(mymat<span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>(), <span class="at">FUN =</span> mean) <span class="sc">|&gt;</span> <span class="fu">unlist</span>()</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>end_time5 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>time_lapply <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time5, start_time5, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>lapply_mem <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp5, time_lapply, lapply_mem, <span class="at">file =</span> <span class="st">"lapply.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="use-sapply-function" class="level4">
<h4 class="anchored" data-anchor-id="use-sapply-function">Use sapply function</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>mem_init <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">## sapply -------------------------</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>mymat <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>mean_temp6 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>start_time6 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>mean_temp6 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(mymat<span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>(), <span class="at">FUN =</span> mean, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>end_time6 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>time_sapply <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time6, start_time6, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>sapply_mem <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp6, time_sapply, sapply_mem, <span class="at">file =</span> <span class="st">"sapply.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  576638 30.8    1272364   68   576638 30.8
Vcells 1064280  8.2    8388608   64  1064280  8.2</code></pre>
</div>
</div>
<hr>
<hr>
</section>
</section>
<section id="generate-with-n-106" class="level2">
<h2 class="anchored" data-anchor-id="generate-with-n-106">generate with n = 10<sup>6</sup></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="traditional-programming-1" class="level4">
<h4 class="anchored" data-anchor-id="traditional-programming-1">Traditional Programming</h4>
<div class="cell" data-mwssage="false">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="do">## generate data -----</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">321</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fl">1e+6</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>mymat_l <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(n, <span class="dv">2</span>, <span class="dv">1</span>), <span class="fl">1e+3</span>, <span class="fl">1e+3</span>) </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(mymat_l, <span class="at">file =</span> <span class="st">"Data_for_test_l"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>mem_init_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>mymat_l <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test_l"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="use-nested-loops-while-2" class="level6">
<h6 class="anchored" data-anchor-id="use-nested-loops-while-2">Use Nested Loops (while)</h6>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Use Traditional Programmin ------------------------------</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>mean_temp1_w_l <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>start_time1_w_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (k <span class="sc">&lt;=</span> <span class="fl">1e+3</span>) {</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> (m <span class="sc">&lt;=</span> <span class="fl">1e+3</span>) {</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>        temp <span class="ot">&lt;-</span> temp <span class="sc">+</span> mymat_l[m, k]</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>        m <span class="ot">&lt;-</span> m <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    mean_temp1_w_l <span class="ot">&lt;-</span> <span class="fu">c</span>(mean_temp1_w_l, temp <span class="sc">/</span> <span class="fl">1e+3</span>)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    k <span class="ot">&lt;-</span> k <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>end_time1_w_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>Time_Traditional_w_l <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time1_w_l, start_time1_w_l, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>trad_mem_w_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init_l</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp1_w_l, Time_Traditional_w_l, trad_mem_w_l, <span class="at">file =</span> <span class="st">"Traditional_w_l.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-nested-loops-for-1" class="level6">
<h6 class="anchored" data-anchor-id="use-nested-loops-for-1">Use Nested Loops (for)</h6>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>mem_init_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>mymat_l <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test_l"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Use Traditional Programmin ------------------------------</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>mean_temp1_f_l <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>start_time1_f_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fl">1e+3</span>) {</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fl">1e+3</span>) {</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>        temp <span class="ot">&lt;-</span> temp <span class="sc">+</span> mymat_l[j, i]</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    mean_temp1_f_l <span class="ot">&lt;-</span> <span class="fu">c</span>(mean_temp1_f_l, temp <span class="sc">/</span> <span class="fl">1e+3</span>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>end_time1_f_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>Time_Traditional_f_l <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time1_f_l, start_time1_f_l, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>trad_mem_f_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init_l</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp1_f_l, Time_Traditional_f_l, trad_mem_f_l, <span class="at">file =</span> <span class="st">"Traditional_f_l.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-nested-loops-repeat-1" class="level6">
<h6 class="anchored" data-anchor-id="use-nested-loops-repeat-1">Use Nested Loops (repeat)</h6>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>mem_init_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>mymat_l <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test_l"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Use Traditional Programmin ------------------------------</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>mean_temp1_re_l <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>start_time1_re_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>k <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="cf">repeat</span>{</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    j <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    s <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">repeat</span>{</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        j <span class="ot">&lt;-</span> j <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        temp <span class="ot">=</span> mymat_l[j, k]</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>        s <span class="ot">&lt;-</span> s <span class="sc">+</span> temp</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (j <span class="sc">==</span> <span class="fl">1e+3</span>) <span class="cf">break</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    mean_temp1_re_l <span class="ot">&lt;-</span> <span class="fu">c</span>(mean_temp1_re_l, s <span class="sc">/</span> <span class="fl">1e+3</span>)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (k <span class="sc">==</span> <span class="fl">1e+3</span>) <span class="cf">break</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    k <span class="ot">&lt;-</span> k <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>end_time1_re_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>Time_Traditional_re_l <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time1_re_l, start_time1_re_l, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>trad_mem_re_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init_l</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp1_re_l, Time_Traditional_re_l, trad_mem_re_l, <span class="at">file =</span> <span class="st">"Traditional_re_l.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="including-loops-for" class="level4">
<h4 class="anchored" data-anchor-id="including-loops-for">including Loops (for)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>mem_init_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="do">## use loop --------------------</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>mymat_l <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test_l"</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>mean_temp2_l <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>start_time2_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fl">1e+3</span>){</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="fu">mean</span>(mymat_l[, i])</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    mean_temp2_l <span class="ot">&lt;-</span> <span class="fu">c</span>(mean_temp2_l, temp)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>end_time2_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>time_loop_l <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time2_l, start_time2_l, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>loop_mem_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init_l</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp2_l, time_loop_l, loop_mem_l, </span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">file =</span> <span class="st">"loop_l.Rdata"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-apply-function-1" class="level4">
<h4 class="anchored" data-anchor-id="use-apply-function-1">use apply function</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>mem_init_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="do">## apply -----------------</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>mymat_l <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test_l"</span>)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>mean_temp3_l <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>start_time3_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>mean_temp3_l <span class="ot">&lt;-</span> <span class="fu">apply</span>(mymat_l, <span class="dv">2</span>, mean)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>end_time3_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>time_apply_l <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time3_l, start_time3_l, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>apply_mem_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init_l</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp3_l, time_apply_l, apply_mem_l, <span class="at">file =</span> <span class="st">"aPPly_l.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-vapply-function-1" class="level4">
<h4 class="anchored" data-anchor-id="use-vapply-function-1">Use vapply function</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>mem_init_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="do">## vapply -------------------------</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>mymat_l <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test_l"</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>mean_temp4_l <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>start_time4_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>mean_temp4_l <span class="ot">&lt;-</span> <span class="fu">vapply</span>(mymat_l <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>(), <span class="at">FUN =</span> mean, <span class="at">FUN.VALUE =</span> <span class="fu">numeric</span>(<span class="dv">1</span>))</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>end_time4_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>time_vapply_l <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time4_l, start_time4_l, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>vapply_mem_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init_l</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp4_l, time_vapply_l, vapply_mem_l, <span class="at">file =</span> <span class="st">"Vapply_l.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="use-lapply-function-1" class="level2">
<h2 class="anchored" data-anchor-id="use-lapply-function-1">Use lapply function</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>mem_init_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="do">## lapply -------------------------</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>mymat_l <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test_l"</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>mean_temp5_l <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>start_time5_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>mean_temp5_l <span class="ot">&lt;-</span> <span class="fu">lapply</span>(mymat_l <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>(), <span class="at">FUN =</span> mean) <span class="sc">|&gt;</span> <span class="fu">unlist</span>()</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>end_time5_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>time_lapply_l <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time5_l, start_time5_l, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>lapply_mem_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init_l</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp5_l, time_lapply_l, lapply_mem_l, <span class="at">file =</span> <span class="st">"lapply_l.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="use-sapply-function-1" class="level4">
<h4 class="anchored" data-anchor-id="use-sapply-function-1">Use sapply function</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>mem_init_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="do">## sapply -------------------------</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>mymat_l <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"Data_for_test_l"</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>mean_temp6_l <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>start_time6_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>mean_temp6_l <span class="ot">&lt;-</span> <span class="fu">sapply</span>(mymat_l <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>(), <span class="at">FUN =</span> mean, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>end_time6_l <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>time_sapply_l <span class="ot">&lt;-</span> <span class="fu">difftime</span>(end_time6_l, start_time6_l, <span class="at">unit =</span> <span class="st">"sec"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>sapply_mem_l <span class="ot">&lt;-</span> pryr <span class="sc">::</span> <span class="fu">mem_used</span>()[[<span class="dv">1</span>]] <span class="sc">-</span> mem_init_l</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mean_temp6_l, time_sapply_l, sapply_mem_l, <span class="at">file =</span> <span class="st">"sapply_l.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<hr>
</section>
<section id="get-results-for-n-106" class="level4">
<h4 class="anchored" data-anchor-id="get-results-for-n-106">get results for n = 10<sup>6</sup></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="do">## load stored objects </span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"Traditional_w_l.RData"</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"Traditional_f_l.RData"</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"Traditional_re_l.RData"</span>)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"loop_l.Rdata"</span>)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"aPPly_l.RData"</span>)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"Vapply_l.RData"</span>)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"lapply_l.RData"</span>)</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"sapply_l.RData"</span>)</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="do">## get results ----------------------------</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(<span class="at">Nested_loop_While =</span> mean_temp1_w_l,</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">Nested_loop_for =</span> mean_temp1_f_l,</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">Nested_loop_While =</span> mean_temp1_re_l, <span class="at">Including_Loop_For =</span> mean_temp2_l, <span class="at">apply_mean =</span> mean_temp3_l, </span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">Vapply_mean =</span> mean_temp4_l, <span class="at">lapply =</span> mean_temp5_l, </span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">sapply =</span> mean_temp6_l) <span class="sc">|&gt;</span> </span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>                <span class="fu">head</span>() <span class="sc">|&gt;</span></span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>                knitr <span class="sc">::</span> <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Mean Results for n = 1e+6"</span>, <span class="at">align =</span> <span class="st">"c"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Mean Results for n = 1e+6</caption>
<colgroup>
<col style="width: 2%">
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 16%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;">Nested_loop_While</th>
<th style="text-align: center;">Nested_loop_for</th>
<th style="text-align: center;">Nested_loop_While</th>
<th style="text-align: center;">Including_Loop_For</th>
<th style="text-align: center;">apply_mean</th>
<th style="text-align: center;">Vapply_mean</th>
<th style="text-align: center;">lapply</th>
<th style="text-align: center;">sapply</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">V1</td>
<td style="text-align: center;">2.039026</td>
<td style="text-align: center;">2.039026</td>
<td style="text-align: center;">2.039026</td>
<td style="text-align: center;">2.039026</td>
<td style="text-align: center;">2.039026</td>
<td style="text-align: center;">2.039026</td>
<td style="text-align: center;">2.039026</td>
<td style="text-align: center;">2.039026</td>
</tr>
<tr class="even">
<td style="text-align: left;">V2</td>
<td style="text-align: center;">2.015600</td>
<td style="text-align: center;">2.015600</td>
<td style="text-align: center;">2.015600</td>
<td style="text-align: center;">2.015600</td>
<td style="text-align: center;">2.015600</td>
<td style="text-align: center;">2.015600</td>
<td style="text-align: center;">2.015600</td>
<td style="text-align: center;">2.015600</td>
</tr>
<tr class="odd">
<td style="text-align: left;">V3</td>
<td style="text-align: center;">1.997163</td>
<td style="text-align: center;">1.997163</td>
<td style="text-align: center;">1.997163</td>
<td style="text-align: center;">1.997163</td>
<td style="text-align: center;">1.997163</td>
<td style="text-align: center;">1.997163</td>
<td style="text-align: center;">1.997163</td>
<td style="text-align: center;">1.997163</td>
</tr>
<tr class="even">
<td style="text-align: left;">V4</td>
<td style="text-align: center;">1.994218</td>
<td style="text-align: center;">1.994218</td>
<td style="text-align: center;">1.994218</td>
<td style="text-align: center;">1.994218</td>
<td style="text-align: center;">1.994218</td>
<td style="text-align: center;">1.994218</td>
<td style="text-align: center;">1.994218</td>
<td style="text-align: center;">1.994218</td>
</tr>
<tr class="odd">
<td style="text-align: left;">V5</td>
<td style="text-align: center;">2.026926</td>
<td style="text-align: center;">2.026926</td>
<td style="text-align: center;">2.026926</td>
<td style="text-align: center;">2.026926</td>
<td style="text-align: center;">2.026926</td>
<td style="text-align: center;">2.026926</td>
<td style="text-align: center;">2.026926</td>
<td style="text-align: center;">2.026926</td>
</tr>
<tr class="even">
<td style="text-align: left;">V6</td>
<td style="text-align: center;">1.994220</td>
<td style="text-align: center;">1.994220</td>
<td style="text-align: center;">1.994220</td>
<td style="text-align: center;">1.994220</td>
<td style="text-align: center;">1.994220</td>
<td style="text-align: center;">1.994220</td>
<td style="text-align: center;">1.994220</td>
<td style="text-align: center;">1.994220</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(<span class="at">Method =</span> <span class="fu">c</span>(<span class="st">"Nested_Loop_While"</span>, <span class="st">"Nested_Loop_For"</span>, <span class="st">"Nested_Loop_Repeat"</span>, </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Including loop (for)"</span>, <span class="st">"apply"</span>, <span class="st">"vapply"</span>, </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"lapply"</span>, <span class="st">"sapply"</span>), </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Elapsed_Time =</span> <span class="fu">c</span>(Time_Traditional_w_l, Time_Traditional_f_l, </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>                    Time_Traditional_re_l, time_loop_l, time_apply_l, time_vapply_l, </span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>                    time_lapply_l, time_sapply_l), </span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Memory_Usage =</span> <span class="fu">c</span>(trad_mem_w_l, trad_mem_f_l, </span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>                    trad_mem_re_l, loop_mem_l, apply_mem_l, </span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>                    vapply_mem_l, lapply_mem_l, sapply_mem_l)) <span class="sc">|&gt;</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>                    knitr <span class="sc">::</span> <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Time and Memory usage Results for n = 1e+6"</span>, <span class="at">align =</span> <span class="st">"c"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Time and Memory usage Results for n = 1e+6</caption>
<thead>
<tr class="header">
<th style="text-align: center;">Method</th>
<th style="text-align: center;">Elapsed_Time</th>
<th style="text-align: center;">Memory_Usage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Nested_Loop_While</td>
<td style="text-align: center;">0.192893028259277</td>
<td style="text-align: center;">8035984</td>
</tr>
<tr class="even">
<td style="text-align: center;">Nested_Loop_For</td>
<td style="text-align: center;">0.160674095153809</td>
<td style="text-align: center;">8018760</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Nested_Loop_Repeat</td>
<td style="text-align: center;">0.241913080215454</td>
<td style="text-align: center;">8020960</td>
</tr>
<tr class="even">
<td style="text-align: center;">Including loop (for)</td>
<td style="text-align: center;">0.0464990139007568</td>
<td style="text-align: center;">8214216</td>
</tr>
<tr class="odd">
<td style="text-align: center;">apply</td>
<td style="text-align: center;">0.0278589725494385</td>
<td style="text-align: center;">8036024</td>
</tr>
<tr class="even">
<td style="text-align: center;">vapply</td>
<td style="text-align: center;">0.0410878658294678</td>
<td style="text-align: center;">8121152</td>
</tr>
<tr class="odd">
<td style="text-align: center;">lapply</td>
<td style="text-align: center;">0.0386741161346436</td>
<td style="text-align: center;">8089664</td>
</tr>
<tr class="even">
<td style="text-align: center;">sapply</td>
<td style="text-align: center;">0.0392189025878906</td>
<td style="text-align: center;">8089664</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>(<span class="at">verbose =</span> F, <span class="at">reset =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="get-results-for-n-109" class="level4">
<h4 class="anchored" data-anchor-id="get-results-for-n-109">get Results for n = 10<sup>9</sup></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="do">## load stored objects </span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"Traditional_w.RData"</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"Traditional_f.RData"</span>)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"Traditional_re.RData"</span>)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"loop.Rdata"</span>)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"aPPly.RData"</span>)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"Vapply.RData"</span>)</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"lapply.RData"</span>)</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"sapply.RData"</span>)</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a><span class="do">## get results ----------------------------</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(<span class="at">Nested_Loop_While =</span> mean_temp1_w, <span class="at">Nested_Loop_For =</span> mean_temp1, </span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">Nested_Loop_Repeat =</span> mean_temp1_re,</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">Including_Loop_for =</span> mean_temp2, <span class="at">apply_mean =</span> mean_temp3, </span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>                <span class="at">Vapply_mean =</span> mean_temp4, <span class="at">lapply =</span> mean_temp5, </span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">sapply =</span> mean_temp6) <span class="sc">|&gt;</span> </span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>                <span class="fu">head</span>() <span class="sc">|&gt;</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>                knitr <span class="sc">::</span> <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Mean Results for n = 1e+9"</span>, <span class="at">align =</span> <span class="st">"c"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Mean Results for n = 1e+9</caption>
<colgroup>
<col style="width: 2%">
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;">Nested_Loop_While</th>
<th style="text-align: center;">Nested_Loop_For</th>
<th style="text-align: center;">Nested_Loop_Repeat</th>
<th style="text-align: center;">Including_Loop_for</th>
<th style="text-align: center;">apply_mean</th>
<th style="text-align: center;">Vapply_mean</th>
<th style="text-align: center;">lapply</th>
<th style="text-align: center;">sapply</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">V1</td>
<td style="text-align: center;">1.997802</td>
<td style="text-align: center;">1.997802</td>
<td style="text-align: center;">1.997802</td>
<td style="text-align: center;">1.997802</td>
<td style="text-align: center;">1.997802</td>
<td style="text-align: center;">1.997802</td>
<td style="text-align: center;">1.997802</td>
<td style="text-align: center;">1.997802</td>
</tr>
<tr class="even">
<td style="text-align: left;">V2</td>
<td style="text-align: center;">2.000853</td>
<td style="text-align: center;">2.000853</td>
<td style="text-align: center;">2.000853</td>
<td style="text-align: center;">2.000853</td>
<td style="text-align: center;">2.000853</td>
<td style="text-align: center;">2.000853</td>
<td style="text-align: center;">2.000853</td>
<td style="text-align: center;">2.000853</td>
</tr>
<tr class="odd">
<td style="text-align: left;">V3</td>
<td style="text-align: center;">1.992850</td>
<td style="text-align: center;">1.992850</td>
<td style="text-align: center;">1.992850</td>
<td style="text-align: center;">1.992850</td>
<td style="text-align: center;">1.992850</td>
<td style="text-align: center;">1.992850</td>
<td style="text-align: center;">1.992850</td>
<td style="text-align: center;">1.992850</td>
</tr>
<tr class="even">
<td style="text-align: left;">V4</td>
<td style="text-align: center;">2.001808</td>
<td style="text-align: center;">2.001808</td>
<td style="text-align: center;">2.001808</td>
<td style="text-align: center;">2.001808</td>
<td style="text-align: center;">2.001808</td>
<td style="text-align: center;">2.001808</td>
<td style="text-align: center;">2.001808</td>
<td style="text-align: center;">2.001808</td>
</tr>
<tr class="odd">
<td style="text-align: left;">V5</td>
<td style="text-align: center;">2.006094</td>
<td style="text-align: center;">2.006094</td>
<td style="text-align: center;">2.006094</td>
<td style="text-align: center;">2.006094</td>
<td style="text-align: center;">2.006094</td>
<td style="text-align: center;">2.006094</td>
<td style="text-align: center;">2.006094</td>
<td style="text-align: center;">2.006094</td>
</tr>
<tr class="even">
<td style="text-align: left;">V6</td>
<td style="text-align: center;">1.995905</td>
<td style="text-align: center;">1.995905</td>
<td style="text-align: center;">1.995905</td>
<td style="text-align: center;">1.995905</td>
<td style="text-align: center;">1.995905</td>
<td style="text-align: center;">1.995905</td>
<td style="text-align: center;">1.995905</td>
<td style="text-align: center;">1.995905</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(<span class="at">Method =</span> <span class="fu">c</span>(<span class="st">"Newsted_Loop_While"</span>, </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Nested_Loop_For"</span>, <span class="st">"Nested_Loop_Repeat"</span>, <span class="st">"Including loop (for)"</span>, <span class="st">"apply"</span>, <span class="st">"vapply"</span>, </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"lapply"</span>, <span class="st">"sapply"</span>), </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">Elapsed_Time =</span> <span class="fu">c</span>(Time_Traditional_w, </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>                        Time_Traditional, Time_Traditional_re, </span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>                        time_loop, time_apply, time_vapply, </span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>                        time_lapply, time_sapply), </span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">Memory_Usage =</span> <span class="fu">c</span>(trad_mem_w, trad_mem, </span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>                        trad_mem_re, loop_mem, </span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>                        apply_mem, vapply_mem, lapply_mem, sapply_mem)) <span class="sc">|&gt;</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>                        knitr <span class="sc">::</span> <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Time and Memory usage Results for n = 1e+9"</span>, <span class="at">align =</span> <span class="st">"c"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Time and Memory usage Results for n = 1e+9</caption>
<thead>
<tr class="header">
<th style="text-align: center;">Method</th>
<th style="text-align: center;">Elapsed_Time</th>
<th style="text-align: center;">Memory_Usage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Newsted_Loop_While</td>
<td style="text-align: center;">38.914088010788</td>
<td style="text-align: center;">8000092816</td>
</tr>
<tr class="even">
<td style="text-align: center;">Nested_Loop_For</td>
<td style="text-align: center;">22.3035340309143</td>
<td style="text-align: center;">8000091184</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Nested_Loop_Repeat</td>
<td style="text-align: center;">46.1129908561707</td>
<td style="text-align: center;">8001055920</td>
</tr>
<tr class="even">
<td style="text-align: center;">Including loop (for)</td>
<td style="text-align: center;">6.70286512374878</td>
<td style="text-align: center;">8000086248</td>
</tr>
<tr class="odd">
<td style="text-align: center;">apply</td>
<td style="text-align: center;">85.5611078739166</td>
<td style="text-align: center;">8000086088</td>
</tr>
<tr class="even">
<td style="text-align: center;">vapply</td>
<td style="text-align: center;">80.7582409381866</td>
<td style="text-align: center;">8000837200</td>
</tr>
<tr class="odd">
<td style="text-align: center;">lapply</td>
<td style="text-align: center;">75.802118062973</td>
<td style="text-align: center;">8000814352</td>
</tr>
<tr class="even">
<td style="text-align: center;">sapply</td>
<td style="text-align: center;">71.012011051178</td>
<td style="text-align: center;">8000814264</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>